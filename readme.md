# TAVR术前流固耦合分析系统

## 系统概述

TAVR术前流固耦合分析系统是一个专门用于经导管主动脉瓣置换术（TAVR）术前评估的综合性软件平台。该系统通过对患者CT图像进行三维重建、网格生成和流固耦合模拟，为临床医生提供精确的手术规划建议。

## 主要功能

### 1. 医学图像处理
- **DICOM数据导入**：支持标准DICOM格式的CT图像导入
- **自动分割**：基于阈值和区域生长的主动脉自动分割
- **手动编辑**：提供交互式分割编辑工具
- **3D重建**：实时三维可视化和多平面重建

### 2. 网格生成
- **自适应网格**：根据解剖结构自动调整网格密度
- **质量控制**：网格质量评估和优化
- **多种网格类型**：支持四面体、六面体混合网格

### 3. 流固耦合模拟
- **血流动力学分析**：计算血流速度、压力分布
- **结构力学分析**：评估瓣膜应力和变形
- **瓣周漏评估**：定量分析瓣周漏风险
- **冠脉阻塞风险**：评估冠状动脉阻塞可能性

### 4. 结果分析与报告
- **可视化展示**：云图、矢量图、流线图
- **定量指标**：跨瓣压差、有效瓣口面积等
- **风险评估**：综合评分和分级
- **报告生成**：自动生成标准化临床报告

## 系统要求

### 硬件要求
- **处理器**：Intel Core i5或更高（推荐i7/i9）
- **内存**：8GB RAM（推荐16GB或更高）
- **显卡**：支持OpenGL 3.3或更高版本
- **硬盘**：至少10GB可用空间

### 软件要求
- **操作系统**：Windows 10/11, macOS 10.14+, Ubuntu 18.04+
- **Python**：3.7或更高版本
- **依赖库**：见requirements.txt

## 安装指南

### 1. 克隆或下载项目
```bash
git clone https://github.com/your-repo/tavr-fsi-analysis.git
cd tavr-fsi-analysis
```

### 2. 安装Python依赖
```bash
pip install -r requirements.txt
```

### 3. 运行安装脚本
```bash
python setup.py
```

### 4. 启动程序
**Windows用户**：
```bash
双击 "启动TAVR分析系统.bat"
```

**Linux/Mac用户**：
```bash
./launch_tavr.sh
```

或直接运行：
```bash
python tavr_fsi_gui.py
```

## 快速开始

### 1. 导入CT数据
- 点击"导入CT数据"按钮
- 选择包含DICOM文件的文件夹
- 系统将自动读取并显示图像

### 2. 图像分割
- 点击"自动分割"进行初步分割
- 使用"手动编辑"工具修正分割结果
- 应用"平滑处理"优化边界

### 3. 网格生成
- 设置网格参数（默认值通常足够）
- 点击"生成网格"
- 查看网格质量报告

### 4. 运行模拟
- 选择瓣膜类型和尺寸
- 点击"运行模拟"
- 等待计算完成（通常需要5-10分钟）

### 5. 查看结果
- 在"模拟结果"标签页查看各项指标
- 生成临床报告
- 导出为PDF或Word格式

## 测试数据

系统提供测试数据生成工具：
```bash
python generate_test_data.py
```

选项：
1. 生成单个测试CT数据
2. 生成完整测试数据集
3. 生成模拟结果数据
4. 生成所有测试数据

## 文件结构

```
tavr-fsi-analysis/
├── tavr_fsi_gui.py          # 主程序
├── requirements.txt         # 依赖包列表
├── setup.py                # 安装脚本
├── generate_test_data.py   # 测试数据生成器
├── config.ini              # 配置文件
├── data/                   # 数据目录
│   ├── patients/          # 患者数据
│   └── templates/         # 模板文件
├── results/               # 结果输出
├── logs/                  # 日志文件
├── cache/                 # 缓存目录
├── resources/             # 资源文件
│   └── icons/            # 图标文件
└── docs/                  # 文档目录
```

## 主要类和功能模块

### TAVRAnalysisGUI
主窗口类，管理整个应用程序界面和工作流程。

### CTViewerWidget
CT图像查看器，支持窗位/窗宽调整、多平面显示。

### Reconstruction3DWidget
三维重建显示，基于VTK的体绘制和表面渲染。

### MeshViewerWidget
网格查看器，显示和分析生成的计算网格。

### SimulationResultsWidget
模拟结果展示，包括各种血流动力学和力学指标。

### ReportWidget
报告生成和预览，支持导出多种格式。

## 注意事项

1. **数据安全**：系统会自动对患者信息进行脱敏处理
2. **计算资源**：复杂模拟可能需要较长计算时间
3. **结果解释**：模拟结果仅供参考，最终决策需结合临床经验
4. **版本兼容**：确保使用兼容版本的依赖库

## 常见问题

### Q: 程序启动失败
A: 检查Python版本和依赖库是否正确安装，查看logs目录下的错误日志。

### Q: 无法导入DICOM文件
A: 确保DICOM文件完整，尝试使用其他DICOM查看器验证文件。

### Q: 模拟计算很慢
A: 可以在设置中减少网格密度或降低迭代次数，但可能影响精度。

### Q: 内存不足错误
A: 尝试处理较小的图像区域，或升级系统内存。

## 技术支持

- **邮箱**：support@tavr-analysis.com
- **论坛**：https://forum.tavr-analysis.com
- **文档**：https://docs.tavr-analysis.com

## 许可证

本软件仅供研究和教育使用。商业使用请联系开发团队获取许可。

## 更新日志

### v1.0.0 (2024-01-01)
- 初始版本发布
- 基本功能实现
- 支持标准TAVR工作流程

## 贡献指南

欢迎提交问题报告和功能建议。如需贡献代码，请：
1. Fork项目
2. 创建功能分支
3. 提交Pull Request

## 致谢

感谢所有为本项目做出贡献的开发者和医学专家。

---

© 2024 医学影像分析实验室 版权所有